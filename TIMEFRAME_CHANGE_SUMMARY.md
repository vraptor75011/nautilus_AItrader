# 时间框架更改摘要

**更改日期:** $(date '+%Y-%m-%d %H:%M:%S')
**更改内容:** 将策略时间间隔从 1分钟 改为 15分钟

---

## 1. 配置文件更改

### 📄 configs/strategy_config.yaml

**更改前:**
- `bar_type: "BTCUSDT-PERP.BINANCE-1-MINUTE-LAST-EXTERNAL"`
- 技术指标使用缩短周期（快速测试模式）

**更改后:**
- `bar_type: "BTCUSDT-PERP.BINANCE-15-MINUTE-LAST-EXTERNAL"`
- 技术指标恢复为生产环境标准周期

**技术指标参数对比:**

| 指标 | 1分钟模式 | 15分钟模式 |
|-----|---------|----------|
| SMA | [3, 7, 15] | [5, 20, 50] |
| RSI | 7 | 14 |
| MACD Fast | 5 | 12 |
| MACD Slow | 10 | 26 |
| MACD Signal | 5 | 9 |
| Bollinger | 10 | 20 |

---

## 2. AI客户端更改

### 📄 utils/deepseek_client.py

**更改内容:**
1. 系统提示词：`【5. 15-MINUTE TIMEFRAME SPECIFIC CONSIDERATIONS】`
2. K线数据描述：`【Recent 10 15-minute K-lines (Most Recent)】`

**更改说明:**
- 将时间框架描述从"1分钟"改为"15分钟"
- 强调15分钟时间框架的特性：
  - 更平衡的趋势跟踪和波段交易
  - 信号更可靠，噪音更少
  - MACD交叉信号更具意义

---

## 3. 主程序更改

### 📄 main_live.py

**更改前:**
- `timeframe = get_env_str('TIMEFRAME', '1m')`

**更改后:**
- `timeframe = get_env_str('TIMEFRAME', '15m')`

**说明:**
- 默认时间框架改为15分钟
- 技术指标会根据时间框架自动调整：
  - 1分钟：使用缩短周期（测试模式）
  - 15分钟：使用标准周期（生产模式）

---

## 4. 一致性验证

✅ **Bar Type:** 15-MINUTE
✅ **技术指标:** 标准生产周期
✅ **AI调用间隔:** 900秒（15分钟）
✅ **默认时间框架:** 15m
✅ **AI提示词:** 15分钟时间框架描述

---

## 5. 预期影响

### 优势：
1. **信号质量提升** - 减少噪音，提高信号可靠性
2. **降低交易成本** - 交易频率降低，减少手续费
3. **降低API成本** - DeepSeek API调用频率保持15分钟一次
4. **更好的趋势捕捉** - 15分钟更适合捕捉中短期趋势
5. **指标更准确** - 标准周期的技术指标更有效

### 注意事项：
1. **历史数据** - 策略需要积累更多15分钟K线才能初始化指标
   - SMA50需要50根15分钟K线 = 12.5小时
2. **回测调整** - 如果要回测，需要使用15分钟历史数据
3. **环境变量** - 可以通过 `TIMEFRAME=1m` 环境变量临时切换回1分钟模式

---

## 6. 启动方式

### 生产模式（15分钟）:
\`\`\`bash
python main_live.py
\`\`\`

### 测试模式（1分钟）:
\`\`\`bash
TIMEFRAME=1m python main_live.py
\`\`\`

---

## 7. 监控建议

启动后请监控：
1. ✅ K线数据是否为15分钟间隔
2. ✅ AI分析是否每15分钟执行一次
3. ✅ 技术指标计算是否正确（SMA5, SMA20, SMA50等）
4. ✅ 日志中显示的时间框架信息

查看日志：
\`\`\`bash
tail -f logs/trader.log
\`\`\`

---

## 完成时间
$(date '+%Y-%m-%d %H:%M:%S')

