# å®‰å…¨é…ç½®æŒ‡å— (Security Guide)

## ğŸ”’ ä¿æŠ¤ API Keys çš„æœ€ä½³å®è·µ

### `.gitignore` çš„ä½œç”¨èŒƒå›´

**é‡è¦ç†è§£ï¼š**
- âœ… `.gitignore` **åªä¿æŠ¤ Git ä»“åº“**ï¼šé˜²æ­¢ `.env` æ–‡ä»¶è¢«æäº¤åˆ° GitHub/GitLab ç­‰ä»£ç ä»“åº“
- âŒ `.gitignore` **ä¸èƒ½ä¿æŠ¤äº‘æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶**ï¼šå¦‚æœä½ çš„ `.env` å·²ç»åœ¨æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼ä¿æŠ¤

### äº‘æœåŠ¡å™¨ä¸Šä¿æŠ¤ `.env` æ–‡ä»¶çš„æ–¹æ³•

#### æ–¹æ³• 1: è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™ï¼ˆæ¨èï¼‰

åœ¨äº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# 1. åˆ›å»º .env æ–‡ä»¶ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
cp .env.template .env
nano .env  # å¡«å…¥ä½ çš„çœŸå® API keys

# 2. è®¾ç½®æ–‡ä»¶æƒé™ï¼šåªæœ‰æ‰€æœ‰è€…å¯ä»¥è¯»å†™ï¼Œå…¶ä»–äººæ— æ³•è®¿é—®
chmod 600 .env

# 3. éªŒè¯æƒé™è®¾ç½®
ls -la .env
# åº”è¯¥æ˜¾ç¤º: -rw------- 1 user user 1234 date .env

# 4. ç¡®ä¿ .env çš„çˆ¶ç›®å½•æƒé™ä¹Ÿæ­£ç¡®
chmod 755 $(dirname $(realpath .env))
```

**è§£é‡Šï¼š**
- `chmod 600`: åªæœ‰æ–‡ä»¶æ‰€æœ‰è€…å¯ä»¥è¯»å†™ï¼Œå…¶ä»–äººå®Œå…¨æ— æ³•è®¿é—®
- è¿™æ ·å³ä½¿æœ‰äººèƒ½ç™»å½•æœåŠ¡å™¨ï¼Œä¹Ÿä¸èƒ½è¯»å–ä½ çš„å¯†é’¥æ–‡ä»¶

#### æ–¹æ³• 2: ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

ä¸éœ€è¦ `.env` æ–‡ä»¶ï¼Œç›´æ¥åœ¨ç³»ç»Ÿç¯å¢ƒä¸­è®¾ç½®ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡
export BINANCE_API_KEY="your_real_key"
export BINANCE_API_SECRET="your_real_secret"
export DEEPSEEK_API_KEY="your_real_key"

# æˆ–è€…ä½¿ç”¨ .bashrc æˆ– .bash_profileï¼ˆä»…é™ä½ çš„ç”¨æˆ·ï¼‰
echo 'export BINANCE_API_KEY="your_real_key"' >> ~/.bashrc
echo 'export BINANCE_API_SECRET="your_real_secret"' >> ~/.bashrc
echo 'export DEEPSEEK_API_KEY="your_real_key"' >> ~/.bashrc
source ~/.bashrc
```

**ä¼˜ç‚¹ï¼š**
- ä¸ä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç•™ä¸‹å¯†é’¥æ–‡ä»¶
- æ›´å®‰å…¨ï¼Œå› ä¸ºå¯†é’¥åªåœ¨å†…å­˜ä¸­

**æ³¨æ„ï¼š** ä»£ç ä¸­çš„ `load_dotenv()` ä¼šä¼˜å…ˆè¯»å– `.env` æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ `.env` æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡å·²è®¾ç½®ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚

#### æ–¹æ³• 3: ä½¿ç”¨ Docker Secrets æˆ–äº‘æœåŠ¡å¯†é’¥ç®¡ç†

å¦‚æœä½¿ç”¨ Docker æˆ–äº‘æœåŠ¡ï¼ˆAWS, GCP, Azureï¼‰ï¼š
- **Docker**: ä½¿ç”¨ Docker secrets
- **AWS**: ä½¿ç”¨ AWS Secrets Manager æˆ– Parameter Store
- **GCP**: ä½¿ç”¨ Secret Manager
- **Azure**: ä½¿ç”¨ Key Vault

#### æ–¹æ³• 4: ä½¿ç”¨ systemd æœåŠ¡ï¼ˆLinuxï¼‰

å¦‚æœä½ ä½¿ç”¨ systemd è¿è¡Œç­–ç•¥ï¼š

```ini
# /etc/systemd/system/deepseek-strategy.service
[Unit]
Description=DeepSeek AI Trading Strategy

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/nautilus_deepseek
Environment="BINANCE_API_KEY=your_key"
Environment="BINANCE_API_SECRET=your_secret"
Environment="DEEPSEEK_API_KEY=your_key"
ExecStart=/usr/bin/python3 main_live.py
Restart=always

[Install]
WantedBy=multi-user.target
```

### ğŸ“‹ å®‰å…¨æ£€æŸ¥æ¸…å•

åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²å‰ï¼Œç¡®è®¤ï¼š

- [ ] `.env` æ–‡ä»¶æƒé™è®¾ç½®ä¸º 600 (`chmod 600 .env`)
- [ ] `.env` æ–‡ä»¶ä¸åœ¨ Web æœåŠ¡å™¨å¯è®¿é—®çš„ç›®å½•
- [ ] ä¸è¦åœ¨ä»£ç ã€æ—¥å¿—ã€æ³¨é‡Šä¸­åŒ…å«çœŸå® API keys
- [ ] å®šæœŸè½®æ¢ API keysï¼ˆæ¯æœˆæˆ–æ¯å­£åº¦ï¼‰
- [ ] åœ¨ Binance API è®¾ç½®ä¸­é™åˆ¶ IP è®¿é—®ï¼ˆå¦‚æœå¯èƒ½ï¼‰
- [ ] ä½¿ç”¨æœ€å°æƒé™åŸåˆ™ï¼šAPI key åªæˆäºˆå¿…è¦çš„æƒé™
- [ ] ä¸è¦åœ¨èŠå¤©ã€é‚®ä»¶ä¸­åˆ†äº« API keys

### ğŸš¨ å¦‚æœ API Key æ³„éœ²äº†æ€ä¹ˆåŠï¼Ÿ

1. **ç«‹å³æ’¤é”€**æ—§çš„ API key
2. åœ¨ Binance/DeepSeek å¹³å°ç”Ÿæˆæ–° key
3. æ›´æ–°äº‘æœåŠ¡å™¨ä¸Šçš„ `.env` æ–‡ä»¶
4. æ£€æŸ¥æ˜¯å¦æœ‰æœªæˆæƒçš„äº¤æ˜“æ´»åŠ¨
5. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ï¼Œå¯»æ‰¾å¯èƒ½çš„å…¥ä¾µç—•è¿¹

### å¯¹æ¯”è¡¨æ ¼

| æ–¹æ³• | å®‰å…¨æ€§ | æ˜“ç”¨æ€§ | æ¨èåœºæ™¯ |
|------|--------|--------|----------|
| `.env` + `chmod 600` | â­â­â­â­ | â­â­â­â­â­ | ä¸ªäººæœåŠ¡å™¨ |
| ç³»ç»Ÿç¯å¢ƒå˜é‡ | â­â­â­â­â­ | â­â­â­â­ | ç”Ÿäº§ç¯å¢ƒ |
| Docker Secrets | â­â­â­â­â­ | â­â­â­ | Docker éƒ¨ç½² |
| äº‘æœåŠ¡å¯†é’¥ç®¡ç† | â­â­â­â­â­ | â­â­â­â­ | ä¼ä¸šçº§éƒ¨ç½² |

### éªŒè¯å®‰å…¨æ€§

æµ‹è¯•ä½ çš„é…ç½®æ˜¯å¦å®‰å…¨ï¼š

```bash
# 1. æ£€æŸ¥ .env æ–‡ä»¶æƒé™
ls -la .env
# åº”è¯¥æ˜¾ç¤º: -rw------- (600)

# 2. å°è¯•ç”¨å…¶ä»–ç”¨æˆ·è¯»å–ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
sudo -u other_user cat .env
# åº”è¯¥æ˜¾ç¤º: Permission denied

# 3. æ£€æŸ¥ .env æ˜¯å¦åœ¨ Git ä¸­
git check-ignore .env
# åº”è¯¥è¾“å‡º: .envï¼ˆè¡¨ç¤ºè¢«å¿½ç•¥ï¼‰

# 4. æ£€æŸ¥æ˜¯å¦æ„å¤–æäº¤
git status | grep .env
# åº”è¯¥æ²¡æœ‰ä»»ä½•è¾“å‡º
```

---

**æ€»ç»“ï¼š**

- `.gitignore` ä¿æŠ¤ä½ çš„å¯†é’¥ä¸ä¼šä¸Šä¼ åˆ° GitHub
- ä½†äº‘æœåŠ¡å™¨ä¸Šçš„ `.env` æ–‡ä»¶éœ€è¦é€šè¿‡ **æ–‡ä»¶æƒé™** (`chmod 600`) æ¥ä¿æŠ¤
- ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡æˆ–äº‘æœåŠ¡å¯†é’¥ç®¡ç†

