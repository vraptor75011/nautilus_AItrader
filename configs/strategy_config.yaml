# DeepSeek AI Strategy Configuration for NautilusTrader

strategy:
  name: "DeepSeekAIStrategy"
  instrument_id: "BTCUSDT-PERP.BINANCE"

  # Bar configuration
  bar_type: "BTCUSDT-PERP.BINANCE-1-MINUTE-LAST-EXTERNAL"  # FAST TEST: 1-minute bars

  # Capital and leverage
  equity: 400  # USDT (实际账户余额)
  leverage: 10

  # Position sizing
  position_management:
    base_usdt_amount: 30  # Base position size (adjusted to match max_position_ratio limit)
    high_confidence_multiplier: 1.5
    medium_confidence_multiplier: 1.0
    low_confidence_multiplier: 0.5
    max_position_ratio: 0.10  # Max 10% of equity (40 USDT max)
    trend_strength_multiplier: 1.2
    min_trade_amount: 0.001  # Minimum BTC amount

  # Technical indicators parameters - FAST TEST: Reduced periods
  indicators:
    sma_periods: [3, 7, 15]  # Reduced from [5, 20, 50]
    ema_periods: [5, 10]     # Reduced from [12, 26]
    rsi_period: 7            # Reduced from 14
    macd_fast: 5             # Reduced from 12
    macd_slow: 10            # Reduced from 26
    macd_signal: 5           # Reduced from 9
    bollinger_period: 10     # Reduced from 20
    bollinger_std: 2.0
    volume_ma_period: 10     # Reduced from 20
    support_resistance_lookback: 10  # Reduced from 20

  # AI configuration
  deepseek:
    model: "deepseek-chat"
    temperature: 0.1
    max_retries: 2
    base_url: "https://api.deepseek.com"

  # Sentiment data
  sentiment:
    enabled: true
    provider: "cryptoracle"
    update_interval_minutes: 15
    lookback_hours: 4
    weight: 0.30  # 30% weight in decision making

  # Risk management
  risk:
    min_confidence_to_trade: "MEDIUM"  # LOW, MEDIUM, HIGH
    allow_reversals: true
    require_high_confidence_for_reversal: false  # Set to true for safer trading
    max_consecutive_same_signal: 5
    rsi_extreme_threshold_upper: 75
    rsi_extreme_threshold_lower: 25
    rsi_extreme_multiplier: 0.7

  # Execution
  execution:
    order_type: "MARKET"
    time_in_force: "GTC"
    reduce_only_for_closes: true
    position_adjustment_threshold: 0.001  # Min 0.001 BTC difference to adjust

  # Timing
  timer_interval_sec: 900  # 15 minutes for production (reduced API costs and avoid overtrading)

# Logging configuration
logging:
  log_level: "INFO"
  log_to_file: true
  log_file: "logs/deepseek_strategy.log"
  log_signals: true
  log_positions: true
  log_ai_responses: true
